{% extends "::base.html.twig" %}

{% block header %}
{% if is_granted("ROLE_USER") %}
<ul id="slide-out" class="side-nav">
  <li><div class="user-view cyan accent-4">
    <div class="background">
      <img src="">
    </div>
    <a href="#!user"><img class="circle" src="{{ asset ('uploads/images/users/') }}{{ app.user.avatar }}"></a>
    <a href="#!name"><span class="white-text name"><i class="material-icons left">account_circle</i>{{ app.user.username }}</span></a>
    <a href="#!email"><span class="white-text email"><i class="material-icons left">email</i>{{ app.user.email }}</span></a>
  </div></li>
  <li><a href="/logout"><i class="material-icons left">exit_to_app</i>Déconnexion</a></li>
  <li><div class="divider"></div></li>
  <li><a class="subheader">Tableau de bord</a></li>
  <li><a class="waves-effect" href="{{ path('user_dashboard') }}#profil"><i class="material-icons left">perm_contact_calendar</i>Voir profil</a></li>
  <li><a class="waves-effect" href="{{ path('user_dashboard') }}#avis"><i class="material-icons left">assignment_turned_in</i>Mes avis</a></li>
  <li><a class="waves-effect" href="{{ path('user_dashboard') }}#lieux"><i class="material-icons left">location_on</i>Mes lieux</a></li>
  <li><a class="waves-effect" href="{{ path('user_dashboard') }}#favoris"><i class="material-icons left">star</i>Mes favoris</a></li>
  <!-- <li><a class="waves-effect" href="#!">Mes lieux</a></li> -->
</ul>
<!-- <a href="#" data-activates="slide-out" class="button-collapse show-on-large"><i class="material-icons">menu</i></a> -->
<nav class="black cyan accent-4 navbar-fixed nav-extended ">
  <div class="nav-wrapper">
    <a href="/" class="brand-logo animated jackInTheBox vertical-align-center hide-on-med-and-down" >
      <img width="140"class="vertical-middle  hide-on-med-and-down" src="{{ asset ('images/logo-plaintext.png') }}">
    </a>
    <a data-activates="slide-out" class="button-collapse show-on-large brand-logo center">Tableau de bord</a>
    <ul id="nav-mobile" class="right hide-on-med-and-down">
      {% if is_granted("ROLE_USER") %}
      <li><a href="{{ path('place_index') }}">découvrir</a></li>
      <li><a data-activates="slide-out" class="button-collapse show-on-large"><i class="material-icons left">account_circle</i>{{ app.user.username }}</a></li>
      {% else %}
      <li><a href="/login"><i class="material-icons left">input</i>connexion</a></li>
      <li><a href="/register"><i class="material-icons left">account_circle</i> inscription</a></li>
      {% endif %}
    </ul>
  </div>
  <div class="nav-content white darken-1 hide-on-med-and-down">
    <ul class="tabs tabs-transparent">
      <li class="tab"><a href="{{ path('user_dashboard') }}#profil"><i class="material-icons left">account_circle</i>Voir profil</a></li>
      <li class="tab"><a class="active" href="{{ path('user_dashboard') }}#avis"><i class="material-icons left">assignment_turned_in</i>Mes avis</a></li>
      <li class="tab"><a href="{{ path('user_dashboard') }}#lieux"><i class="material-icons left medium">location_on</i>Mes lieux</a></li>
      <li class="tab"><a href="{{ path('user_dashboard') }}#favoris"><i class="material-icons left medium">star</i>Mes favoris</a></li>
    </ul>
  </div>

</nav>
<!-- PROFIL -->
<div id="profil" class="row center">
  <div class="col s12 m12 l12">
    <h3>Mon profil</h3>
  </div>
  <div class="col s12">
    <img class="circle" width="120" height="120" src="{{ asset ('uploads/images/users/') }}{{ app.user.avatar }}">
  </div>
  <div class="col s12">
    <p><strong>Pseudo</strong></p>
  </div>
  <div class="col s12">
    <p>{{app.user.username}}</p>
  </div>
  <div class="col s12">
    <p><strong>Email</strong></p>
  </div>
  <div class="col s12">
    <p>{{app.user.email}}</p>
  </div>
  <div class="col s12">
    <p><strong>Date de naissance</strong></p>
  </div>
  <div class="col s12">
    <p>{{app.user.age|date('d/m/Y')}}</p>
  </div>
  <div class="col s12">
    <p><strong>Ma description</strong></p>
  </div>
  <div class="col s12">
    {% if app.user.description is null %}
    <p>vous n'avez pas de description </p>
    {% else %}
    <p>{{app.user.description}}</p>
    {% endif %}
  </div>
  <div class="col s12">
    <a  href="{{ path('fos_user_profile_edit') }}"><strong>Modifier</strong></a>
  </div>
  <div class="col s12">
    <p><strong>Mes loisirs favoris</strong></p>
  </div>
  <div class="col s2 offset-s3">
    {% if hobbies is null %}
    {% else %}
    <p>{{ hobbies.first.name}}</p>
    {% endif %}
  </div>
  <div class="col s2 ">
    {% if hobbies is null %}
    <p>Vous n'avez pas encore défini de catégories préférés </p>
    {% else %}
    <p>{{ hobbies.second.name}}</p>
    {% endif %}
  </div>
  <div class="col s2 ">
    {% if hobbies is null %}
    {% else %}
    <p>{{ hobbies.third.name}}</p>
    {% endif %}
  </div>
  <div class="col s12">
    {% if hobbies is null %}
    <a  href="{{ path('user_select_hobbies') }}"><strong>Ajouter</strong></a>
    {% else %}
    <a  href="{{ path('user_edit_hobbies', {'pseudo': app.user.id,'id': hobbies.id }) }}"><strong>Modifier</strong></a>
    {% endif %}
  </div>

</div>
<!-- AVIS -->
<div id="avis" class="row ">
  <div class="col s12 m12 l12 center">
    <h3>Mes avis</h3>
  </div>
  <div class="col s12">

    <ul class="collection with-header">
      <!-- <li class="collection-header"><h4>Mes avis</h4></li> -->
      {% for advice in advices %}
      <li class="collection-item">
        <div>
          <strong><a href="{{ path('show_place', {'name': advice.place.name }) }}">{{ advice.place.name|upper }}</a></strong>
          <br><strong>{{advice.title}}</strong>
          <br>{{ advice.comment }}
          <br>    le {{advice.date|date('d/m/Y à h:m')}}
          <a href="{{ path('edit_advice', {'name': advice.place.name,'id': advice.id }) }}" class="secondary-content"><i class="material-icons">edit</i></a></div>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <!-- LIEUX -->
  <div id="lieux" class="row center">
    <div class="col s12 m12 l12">
      <h3>Mes lieux</h3>
    </div>
    <div class="col s12 m12 l12">
      lieux
    </div>
    <div class="row">
      {% for place in places %}

      <div class="col s12 m4">
        <div class="card blue-grey darken-1">
          <div class="card-content white-text">
            <span class="card-title">{{ place.name|upper }}</span>
            <p> {{ place.city.name }}</p>
          </div>
          <div class="card-action">
            <a href="{{ path('show_place', { 'name': place.name }) }}">Voir</a>
            <a href="{{ path('edit_place', { 'name': place.name }) }}">Modifier</a>
          </div>
        </div>
      </div>
      {% else %}
          <p>vous n'avez pas encore créé de lieu. Voulez-vous en créé un ?</p></br>
      {% endfor %}
    </div>
    <div class="row center">
      <a class="btn " href="{{ path('new_place') }}">Ajouter un lieu</a>

    </div>

  </div>
  <!-- FAVORIS -->

  <div id="favoris" class="row center">
    <div class="col s12 m12 l12">
      <h3>Mes favoris</h3>
    </div>
    <div class="row">
      {% for favorite in favorites %}

      <div class="col s12 m4">
        <div class="card blue-grey darken-1">
          <div class="card-content white-text">
            <span class="card-title">{{ favorite.placeId.name|upper }}</span>
            <p> {{ favorite.placeId.city.name }}</p>
          </div>
          <div class="card-action">
            <a href="{{ path('show_place', { 'name': favorite.placeId.name }) }}">Voir</a>
            <a href="{{ path('delete_favorite', {'id': favorite.id }) }}"><i class="material-icons">edit</i> Supprimer</a>

          </div>
        </div>
      </div>
      {% else %}
          <p>vous n'avez pas encore choisit de lieux favoris. Pour cela, rendez vous sur une fiche d'un lieu existant et ajouter le à vos favoris. Vous les retrouverez ici !</p></br>
          <a href="{{ path('place_index')}}">Voir les lieux </a>
      {% endfor %}
    </div>
  </div>

  {% else %}
  {% endif %}
{% endblock %}

{% block body %}


{% endblock %}
