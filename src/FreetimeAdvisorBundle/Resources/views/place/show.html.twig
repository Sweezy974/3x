{% extends '::base.html.twig' %}
{% block body %}
<div class="row">
  <div class="col s12 m12 l12 center">
    <h3>{{place.name|upper}}</h3>
    {% if place.user.id == app.user.id %}
    <a href="{{ path('edit_place', { 'name': place.name }) }}"><i class="material-icons">edit</i>Modifier ce lieu</a>
    {% endif %}
  </div>
</div>
<div class="row center">
    <p><strong>Localisation :</strong> {{place.location}}</p>
</div>
<div class="row">
  <div class="carousel " style="border:1px solid black;height:300px!important;" >
    {% for photo in place.photo %}
    <a data-lightbox="roadtrip"  data-title="Lieu: {{ photo.place.name|upper}} , ajouté par {{ photo.user.username}} " class="carousel-item" href="{{ asset ('uploads/images/places/') }}{{ photo.name }}"><img src="{{ asset ('uploads/images/places/') }}{{ photo.name }}"></a>
    {% endfor %}
  </div>

</div>
<div class="">
  <div class="col s3 m2 left">
    <div class="chip">
      <a href="#">#{{place.city.name}}</a>
    </div>
  </div>
  <div class="col s3 m2  left">
    <div class="chip">
      <a href="#">#{{place.category.name}}</a>
    </div>
  </div>
  <div class="row col s6 m3 offset-m5 right">
    {% if favorites.userId is defined %}
    <a href="{{ path('delete_favorite', {'id': favorites.id }) }}"> <i class="material-icons right red-text">favorite</i>retirer des favoris </a>
    {% else %}
    <a href="{{ path('user_new_favorite', {'id': place.id }) }}"><i class="material-icons right">favorite</i>Ajouter aux favoris</a>
    {% endif %}
  </div>
</div>
<div class="row">
  <div class="col s12 m12 l12 center">
    <h5>Description</h5>
  </div>
</div>
<div class="row center">
  <p>{{place.description}}</p>
</div>
<div class="row">
  <div class="col s12 m12 l12">
    <hr>
    <h5>les avis :</h5>
  </div>

</div>
<div class="row">
  <div class="col s12 m12 l12">
    <ul class="collection">
      {% for advice in place.advice %}
      <li class="collection-item avatar ">
        <img src="{{ asset ('uploads/images/users/') }}{{ advice.user.avatar }}" alt="" class="circle">
        <span class="title"><strong>{{advice.title}}</strong>
        <p class="">par : {{advice.user.username}}
          {% if advice.user.id == app.user.id %}
          <p>
          <a href="{{ path('edit_advice', {'name': advice.place.name,'id': advice.id }) }}">Modifier </a>|
          <a href="{{ path('delete_advice', {'name': advice.place.name,'id': advice.id }) }}">Supprimer</a>
          mon avis
          </p>
          </span>
          {% endif %}
        </p>

        <p class="truncate"> {{advice.comment}}</p>
        {% if advice.score == 5 %}
        <a href="#!" class="secondary-content"><i class="yellow-text material-icons left">grade</i>{{advice.score}} / 5</a>
        {% elseif advice.score == 4 %}
        <a href="#!" class="secondary-content"><i class="blue-text material-icons left">grade</i>{{advice.score}} / 5</a>
        {% elseif advice.score == 3 %}
        <a href="#!" class="secondary-content"><i class="green-text material-icons left">grade</i>{{advice.score}} / 5</a>
        {% elseif advice.score == 2 %}
        <a href="#!" class="secondary-content"><i class="orange-text material-icons left">grade</i>{{advice.score}} / 5</a>
        {% elseif advice.score == 1 %}
        <a href="#!" class="secondary-content"><i class="red-text material-icons left">grade</i>{{advice.score}} / 5</a>
        {% endif %}
      </li>
      {% endfor %}
    </div>
  </div>
  <div class="row">
    <div class="col s12 m12 l12 center">
      <a href="{{ path('new_place_advice', {'name': place.name }) }}" class="btn "> écrire un avis</a>

    </div>

  </div>
</ul>
{% endblock %}
